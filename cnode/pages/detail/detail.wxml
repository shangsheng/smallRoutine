<!--pages/detail/detail.wxml-->
<!-- 富文本解析模板 -->
<import src="../../wxParse/wxParse.wxml"/>
<!-- 评论模板 -->
<import src="../../wxParseCriticism/wxParse.wxml"/>
 <view class='detail1'>
  <view class='detail-content'>
    <view class='content-top clearfix'>
      <view class='pull-left'>
        <view class='detailImg'>
          <image mode="scaleToFill" src='{{detail.author.avatar_url}}'></image>
        </view>
      </view>
      <view class='pull-left'>
        <view class='detailMilden'>
          <view class='detail-name'>
            <text>{{detail.author.loginname}}</text>
            <view class="detail-type-item">
              <view class="detail-type-item-font" wx:if="{{detail.tab === 'good'}}">#精华#</view>
            </view>
             <view class="detail-type-item"  wx:if="{{detail.tab === 'share'}}">
              <view class="detail-type-item-font">#分享#</view>
            </view>
            <view class="detail-type-item"  wx:if="{{detail.tab === 'ask'}}">
              <view class="detail-type-item-font">#问答#</view>
            </view>
            <view class="detail-type-item"  wx:if="{{detail.tab === 'job'}}">
              <view class="detail-type-item-font">#招聘#</view>
            </view> 
          </view>
          <view class='detail-post-time'>楼主发表于{{ detail.create_at }}</view>
        </view>
      </view>
      <view class='pull-right'>
        <view class='detail-collect-item' id='detail.id' catchtap="collect" wx:if="{{detail.is_collect == false}}">收藏</view>
        <view class='detail-collect-item' id='detail.id' catchtap="collect" wx:if="{{detail.is_collect == true}}">取消收藏</view> 
      </view>
    </view>
    <view class='detail-Bottom'>
      <view class="detail-post-title">
        <view class="detail-posts-tag hot" wx:if="{{detail.top === true}}">置顶</view>
         <view class="detail-posts-tag" wx:if="{{detail.good === true}}">精华</view> 
        {{detail.title}}
      </view>
      <view class='detail-post-content'>
      <!-- {{detail.content}} -->
      <template is="wxParse" data="{{wxParseData:article.nodes}}"/>
      </view>
      <!-- 评论 -->
      <view class='detail-post-criticism'>
        <view class='detail-post-criticism-top'>评论</view>
        <block wx:for="{{ detail.replies }}" wx:if="{{detail.replies.length > 0}}" wx:key="">
        <view class='content-top clearfix' index="{{index}}" id="{{item.id}}">
          <view class='pull-left'>
            <view class='detailImg'>
              <image mode="scaleToFill" src="{{ item.author.avatar_url }}"></image>
            </view>
          </view>
          <view class='pull-left' style='width:70%'>
            <view class='detailMilden'>
              <view class='detail-name'>
                <text>{{ item.author.loginname }}</text>
              </view>
              <view class='detail-post-time'>{{index + 2}}楼 发表于{{ item.create_at }}</view>
              <view class='detail-criticism-content'>
              <!-- {{ item.content }} -->
                <template is="wxParseCriticism" data="{{wxParseData:item.transData.criticism.nodes}}"/>  
              </view>
            </view>
          </view>
          <view class='pull-right'>
            <view class='detail-criticism-item' id="{{item.id}}" data-index="{{index}}" catchtap="reply">
              <image src='../../images/icon/zan.png'></image>
              <text class="detail-post-zan-num" wx:if="{{item.zanNum > 0}}">{{item.zanNum}}</text>
            </view>
            <!-- <view class='detail-criticism-item' id="{{item.id}}" data-index="{{index}}" catchtap="reply">
              <image src='../../images/icon/zanhl.png'></image>
            </view>   -->
          </view>
        </view>
        </block>
        <block wx:if="{{detail.replies.length <= 0}}">
          <view class="detail-post-comment-null">
            <image class="imgnull" mode="scaleToFill" src="/images/icon/null.png"></image>
            <text class="textnull">暂无收录评论 </text>
          </view>
        </block>
      </view>
    </view>
  </view>
</view>
  <modal title="消息" confirm-text="确认" cancel-text="关闭" hidden="{{modalHidden}}" bindconfirm="confirmChange" bindcancel="cancelChange">
    您还没未登录conde，是否前往认证登录？
  </modal>
<loading class="loading" hidden="{{hidden}}">
  <text class="loading-font">加载中...</text>
</loading>